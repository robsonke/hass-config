#
# Author: Rob Sonke
# https://github.com/robsonke/hass-config
#
# Main view, summary view for the whole house and garden.
# 

title: Home
icon: mdi:home
show_empty: true
cards:
  - type: vertical-stack
    title: Status
    cards:
      - type: horizontal-stack
        cards:
          - type: 'custom:button-card'
            entity: person.rob
            show_state: true
            show_name: false
            show_entity_picture: true
            name: Rob
            styles:
              card:
                - height: 100px
              entity_picture:
                - width: 45%
                - border-radius: 50%
                - opacity: 0.8
            state:
              - value: 'not_home'
                styles:
                  entity_picture:
                    - opacity: 0.4
                    - filter: grayscale(100%)
          - type: 'custom:button-card'
            entity: person.steffi
            show_state: true
            show_name: false
            show_entity_picture: true
            name: Steffi
            styles:
              card:
                - height: 100px
              entity_picture:
                - width: 45%
                - border-radius: 50%
                - opacity: 0.8
            state:
              - value: 'not_home'
                styles:
                  entity_picture:
                    - opacity: 0.4
                    - filter: grayscale(100%)
          - type: "custom:button-card"
            entity: input_boolean.guest_mode
            show_icon: true
            color_type: card
            styles:
              card:
                - height: 100px
            state:
              - value: "off"
                styles:
                  card:
                    # sets background to button color with color_type = card
                    - background: var( --ha-card-background, var(--card-background-color, white) )
      - type: horizontal-stack
        cards:
          - type: 'custom:button-card'
            entity: sensor.backdoor_openclose
            show_name: true
          - type: 'custom:button-card'
            entity: sensor.frontdoor_openclose
            show_name: true
          - type: 'custom:button-card'
            entity: sensor.sheddoor_openclose
            show_name: true
      - type: horizontal-stack
        cards:
          - type: "custom:button-card"
            entity: input_boolean.night_mode
            show_icon: true
            color_type: card
          - type: custom:button-card
            entity: alarm_control_panel.alarm
            icon: mdi:security
            color: rgb(255, 0, 0)
            name: Alarm actief
            state:
              - value: "disarmed"
                show_state: false
                color: rgb(0, 255, 0)
                name: Alarm uit
              - value: "arming"
                styles:
                  card:
                    - animation: blink 2s ease infinite
              - value: "armed_away"
                color: red
                icon: mdi:alert
                name: Intruder Alert
                styles:
                  card:
                    - animation: blink 2s ease infinite

  - type: vertical-stack
    title: Verlichting
    cards:
      - type: custom:vertical-stack-in-card
        cards:
          - type: entities
            #title: Verlichting
            show_header_toggle: false
            #icon: mdi:lightbulb
            entities:
              - entity: light.office
                type: custom:slider-entity-row
                toggle: true
                secondary_info: brightness
              - entity: light.kitchen
                type: custom:slider-entity-row
                toggle: true
              - entity: light.fibaro_fgd212_dimmer2_level1_dining
                type: custom:slider-entity-row
                toggle: true
                secondary_info: brightness
              - entity: light.backdoor
                type: custom:slider-entity-row
                toggle: true
                secondary_info: brightness
              - entity: light.everspring_ad147_plug_in_dimmer_module_level_couch
                type: custom:slider-entity-row
                toggle: true
                secondary_info: brightness
              - entity: light.everspring_ad147_plug_in_dimmer_module_level_corner
                type: custom:slider-entity-row
                toggle: true
                secondary_info: brightness
            
          - type: entities
            entities:
              - type: custom:fold-entity-row
                head: light.garden_lights
                open: false
                entities:
                  - entity: light.fibaro_fgd212_dimmer2_level1_veranda
                  - entity: light.garden_wall_lights
                  - entity: light.frontdoor

  - type: vertical-stack
    title: Media
    cards:
      - type: custom:mini-media-player
        entity: media_player.kitchen
        scale: 10
        hide:
          power: true
          power_state: false
          icon: true
          source: false
        info: short
        volume_stateless: true

        group: true
        artwork: cover
        speaker_group:
          platform: sonos
          sync_volume: true
          show_group_count: true
          entities:
            - entity_id: media_player.office
              name: Sonos Kantoor
            - entity_id: media_player.living_room
              name: Sonos Woonkamer
            - entity_id: media_player.kitchen
              name: Sonos Keuken
            - entity_id: media_player.tv_room
              name: Sonos TV
      - type: custom:mini-media-player
        entity: media_player.office
        volume_stateless: true
        hide:
          icon: true
          source: true
          controls: true
        group: true
        artwork: cover

      - type: custom:mini-media-player
        entity: media_player.living_room
        hide:
          power: true
          power_state: false
          icon: true
          source: false
        group: true
        artwork: cover
        speaker_group:
          platform: sonos
          sync_volume: true
          show_group_count: true
          entities:
            - entity_id: media_player.office
              name: Sonos Kantoor
            - entity_id: media_player.living_room
              name: Sonos Woonkamer
            - entity_id: media_player.kitchen
              name: Sonos Keuken
            - entity_id: media_player.tv_room
              name: Sonos TV

  - type: horizontal-stack
    title: Klimaat
    cards:
      - type: custom:mini-graph-card
        name: Kantoor
        entities:
          - sensor.temp_sensor_office_temperature
        line_color: '#e74c3c'
        line_width: 8
        font_size_header: 10
      - type: custom:mini-graph-card
        name: Kantoor
        entities:
          - sensor.temp_sensor_office_humidity
        line_color: blue
        line_width: 8
        font_size_header: 10
      - type: custom:mini-graph-card
        name: Kantoor
        entities:
          - sensor.lightlevel_office
        line_color: var(--accent-color)
        line_width: 8
        font_size_header: 10

  - type: vertical-stack
    title: Camera's
    cards:
          # - camera_view: live
          #   entity: camera.babycam
          #   type: picture-entity
      - camera_view: live
        camera_image: camera.gardencam
        entity: camera.gardencam
        type: picture-entity
      - type: picture-glance
        title: Front Door
        entities:
          - binary_sensor.laagewei_ding
          - binary_sensor.laagewei_motion
          - sensor.laagewei_last_ding
          - sensor.laagewei_last_motion
        camera_image: camera.laagewei
  - type: vertical-stack
    title: Voordeur
    cards:
      - type: entities
        title: Ring Doorbell
        show_header_toggle: false
        entities:
          - binary_sensor.laagewei_ding
          - binary_sensor.laagewei_motion
          - sensor.laagewei_last_ding
          - sensor.laagewei_last_motion
          - sensor.frontdoor_openclose

  - type: vertical-stack
    title: Energie (24h)
    cards:
      - type: custom:mini-graph-card
        entities:
          - entity: sensor.power_production
            name: Zonnepanelen
            show_state: true
            hours_to_show: 24
            show:
              graph: bar
          - entity: sensor.power_consumption
            name: Stroomverbruik
            show_state: true
            hours_to_show: 24
            points_per_hour: 4
            show:
              graph: bar
      - type: entities
        entities:
          - sensor.power_consumption
          - sensor.gas_consumption
          - sensor.hourly_gas_consumption
          - sensor.power_tariff
          - sensor.power_production

  # - type: vertical-stack
  #   title: Alarm
  #   cards:
  #     - type: alarm-panel
  #       entity: alarm_control_panel.alarm
  #       states:
  #         - arm_home
  #         - arm_away
  #       style:
  #         '#keypad mwc-button':
  #           $: |
  #             button {
  #               --mdc-theme-primary: {% if is_state('input_boolean.dark_mode', 'off') %} #464a47; {% else %} #FFF {% endif %};
  #             }
  #       #   '#armActions mwc-button':
  #       #     $: |
  #       #       button {
  #       #         font-size: 22px !important;
  #       #         --mdc-theme-primary:  {% if is_state('group.all_doors_and_windows', 'off') %} rgb(30, 215, 96); {% else %} red {% endif %};
  #       #       }
  #     # show the last opened doors or movements
  #     - card:
  #         show_icon: false
  #         type: entities
  #       filter:
  #         include:
  #           - entity_id: sensor.backdoor_openclose
  #             options:
  #               secondary_info: last-changed
  #           - entity_id: sensor.frontdoor_openclose
  #             options:
  #               secondary_info: last-changed
  #           - entity_id: sensor.sheddoor_openclose
  #             options:
  #               secondary_info: last-changed
  #       sort:
  #         count: 2
  #         method: last_changed
  #       type: 'custom:auto-entities'

  - type: vertical-stack
    title: Weer
    cards:
      - type: custom:weather-card
        entity: weather.goes
        current: true
        details: true
        forecast: true
        hourly_forecast: false
        number_of_forecasts: 5

  - type: vertical-stack
    title: Agenda
    cards:
      # this will be the future but limited in options now
      # see https://www.home-assistant.io/lovelace/calendar/
      # - type: calendar
      #   initial_view: listWeek
      #   entities:
      #     - calendar.afvalkalender
      #     - calendar.joep
      - type: custom:calendar-card
        title: "Afval"
        numberOfDays: 30
        #eventsLimit: 5
        startFromToday: true
        hideTime: true
        dateTopFormat: D MMMM
        hideHeader: true
        dateBottomFormat: ddd
        entities:
          - calendar.afvalkalender
      - type: custom:calendar-card
        title: "Joep"
        progressBar: true
        numberOfDays: 30
        eventsLimit: 5
        hideHeader: true
        startFromToday: true
        #hideTime: true
        dateTopFormat: D MMMM
        dateBottomFormat: dddd
        entities:
          - calendar.joep

  - type: vertical-stack
    title: Settings
    cards:
      - type: entities
        show_header_toggle: false
        entities:
          - entity: input_boolean.enable_automatic_lights
          - entity: input_boolean.dark_mode



action: fire-dom-event
browser_mod:
  service: browser_mod.popup
  data:
    title: Slaapkamers klimaat
    size: wide
    timeout: 60000
    content:
      type: custom:layout-card
      layout_type: custom:grid-layout
      layout:
        grid-template-columns: 3fr 2fr
        grid-template-rows: auto
        grid-template-areas: |
          "climate thermostat"
        mediaquery:
          "(max-width: 800px)":
            grid-template-columns: auto
            grid-template-rows: auto
            grid-template-areas: |
              "thermostat"
              "climate"
      cards:
        - type: vertical-stack
          view_layout:
            grid-area: thermostat
          cards:
            - type: entities
              show_header_toggle: false
              entities:
                - entity: switch.kasa_infrarood_slaapkamer
                  name: Infraroodpanel logeerkamer
                - entity: switch.infraroodpanel_eva
                - entity: switch.shelly_plug_badkamer_verwarming_relay
            - type: conditional
              conditions:
                - entity: switch.shelly_plug_badkamer_verwarming_relay
                  state_not: "off"
              card:
                type: entities
                show_header_toggle: false
                entities:
                  - entity: sensor.shelly_plug_badkamer_verwarming_power

            - type: entities
              show_header_toggle: false
              entities:
                - entity: switch.shelly_plug_douche_verwarming_relay
            - type: conditional
              conditions:
                - entity: switch.shelly_plug_douche_verwarming_relay
                  state_not: "off"
              card:
                type: entities
                show_header_toggle: false
                entities:
                  - entity: sensor.shelly_plug_douche_verwarming_power

            - type: entities
              show_header_toggle: false
              entities:
                - entity: switch.shelly_plug_kachel_slaapkamer
            - type: conditional
              conditions:
                - entity: switch.shelly_plug_kachel_slaapkamer
                  state_not: "off"
              card:
                type: vertical-stack
                title: Slaapkamer
                cards:
                  - type: entities
                    show_header_toggle: false
                    entities:
                      - entity: select.eurom_alutherm_capacity
                        name: Verwarm mode slaapkamer
                      - entity: sensor.eurom_alutherm_power
                        name: Verbruik
                      - entity: sensor.eurom_alutherm_energy_daily
                        name: Verbruik vandaag (kWh)
                  - type: 'custom:simple-thermostat'
                    entity: climate.eurom_alutherm_baseboard_heater
                    version: 3
                    layout:
                      step: row
                    header: false
                    style: |
                      div.mode-title {
                        display: none;
                      }
                      .modes.heading {
                        grid-template-columns: auto !important;
                      }

        - type: vertical-stack
          view_layout:
            grid-area: climate
          cards:
            - type: custom:apexcharts-card
              view_layout:
                grid-area: temp
              config_templates: climate_chart
              series:
                - entity: sensor.climate_sensor_masterbedroom_temperature
                  name: Master
                  color: '#e74c3c'
                  type: area
                  fill_raw: last
                  group_by:
                    func: avg
                    duration: 1h
                - entity: sensor.climate_sensor_eva_temperature
                  name: Eva
                  color: '#e74c3c'
                  type: area
                  fill_raw: last
                  group_by:
                    func: avg
                    duration: 1h
                - entity: sensor.climate_sensor_guestroom_temperature
                  name: Logeerkamer
                  color: '#e74c3c'
                  type: area
                  fill_raw: last
                  group_by:
                    func: avg
                    duration: 1h
            - type: custom:apexcharts-card
              view_layout:
                grid-area: temp
              config_templates: climate_chart
              series:
                - entity: sensor.climate_sensor_masterbedroom_humidity
                  name: Master
                  color: 'blue'
                  type: area
                  fill_raw: last
                  group_by:
                    func: avg
                    duration: 1h
                - entity: sensor.climate_sensor_eva_humidity
                  name: Eva
                  color: 'blue'
                  type: area
                  fill_raw: last
                  group_by:
                    func: avg
                    duration: 1h
                - entity: sensor.climate_sensor_guestroom_humidity
                  name: Logeerkamer
                  color: 'blue'
                  type: area
                  fill_raw: last
                  group_by:
                    func: avg
                    duration: 1h
